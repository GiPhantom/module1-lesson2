stages:
  - test
  - build
  - test2
  - dev
  - prod
  
install_env:
   stage: test
   script:
     - echo " test 1------------------------- "
   tags:
     - shell

run tests:
   stage: test
   script:
     - echo " test 2------------------------- "
   tags:
     - shell

linters:
   stage: test
   script:
     - echo " test linter--------------------- "
   tags:
     - shell

build:
   stage: build
   script:
#     - ./build.sh
    - echo 'running ./build.sh' 
#  when: manual
   tags:
     - shell

tests_after_build:
   stage: test2
   script:
     - echo " tests_after_build 1--------------------- "
   tags:
     - shell

deploy website:
   stage: dev
   script:
#     - cp -rf ./html/* /var/HTML/html/
     - cp -rf ./html/* /var/www/html
     #- ./deploy.sh
     - echo 'running ./build.sh'
   when: manual
   tags:
     - shell
   only:
     refs:
      - tags
      - master
      - /^release.*$/
      
    
deploy prod:
   stage: prod
   script:
#     - ./deploy.sh
      - echo 'running ./build.sh'
   when: manual
   tags:
     - shell
   only:
     refs:
      - tags
      - master
      - /^release.*$/




